# R语言学习


### 删除向量中的一个元素

在其他语言中，我们已经习惯了删除一个元素，就用unset或者delete之类的函数，不过R里面貌似找不到这样的函数，不过可以这样实现

```R
aa <- c(1,2,3,4,5,6)
aa <- c(aa[1:2], aa[4:6])   # 删除下标为3的元素
aa <- aa[aa != 3]           # 如果是删除某个值的元素则更简单
```

### 全等的判断

在php里全等用`===`，不过R不是这样

```R
identical(F, 0)   #
```


### any与all函数：部分true还是全部true

除了做罗辑判断，这两个函数还可以用来判断某个元素是否在数组里面。

```R
aa <- c(2, 3) 
any(aa == 3)  # true
all(aa == 4)  # false
```

### ifelse的大坑

在做向量化运算的时候，ifelse可能并不如你所愿，看例子：

```R
> aa <- c(1,2,3,4)
> ifelse(1, aa + 2, 2)
[1] 3
> aa+2
[1] 3 4 5 6
```

### 得到某个元素出现的位置（下标）

在实际应用开发中，经常需要用到下标，所以怎么得到下标还是很重要的：

```R
which(week == '星期一')
```

### 把结果按照指定下标输出

```R
> table(data['星期'])

星期二 星期六 星期日 星期三 星期四 星期五 星期一 
    34     46     37     55     40     46     65 
```

正常的结果应该是按照星期一到星期日输出：

```R
week <- c('星期一','星期二', '星期三', '星期四', '星期五', '星期六', '星期日')
t <- table(data['星期'])
t[week]
```

不要被排序的想法限制了思路。

### 日期格式转换

as.Date

### 循环向量化

```R
# 例如格式化列表的数据
for (i in arr) dothings()

TO:

lapply(arr, dothings)

# 在数据框中，计算某个列（例如销售价）在另一个列（例如日期）上的透视
# aggregate(values, indexs, FUN)   这个函数可以看作是table函数的扩展 
aggregate(data['销售价'], data['销售日期'], sum)

# 在数据框中，计算某个列（如销售价）在另外两个列（日期，品类）上的的透视
aggregate(data['销售价'], c(data['销售日期'],data['品类']), mean)
```

### 表格排序

```R
> t <- aggregate(data['折扣率'], data['星期'], mean)
> t
    星期    折扣率
1 星期二 0.9747059
2 星期六 0.9826087
3 星期日 0.9729730
4 星期三 0.9721818
5 星期四 0.9657500
6 星期五 0.9358696
7 星期一 0.9878462
```

按星期一到星期天的顺序排序，order函数可以排序

```R
t[order(t[1,]),]
```

但是这样的结果不能满足我们的需求，应该这样：

```R
tn <- rownames(t)
t[week,]
# week是以向量
```

### 单中括号和双中括号

在列表中，需要用到双中括号

* 单中括号：返回一个子列表，值的类型还是列表
* 双中括号：返回列表的一个元素，值的类型就是元素的类型





